!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Diagram=e()}}(function(){var e;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t){void function(){function n(e,t){return e.svgel.parent().select("defs ."+t)}function r(e,t){var n=e.svgel.parent();if("string"==typeof t)var r=Snap.parse(t).select("*");else if(Array.isArray(t))var r=n.el.apply(n.el,t);else e.config.debug&&console.error("unrecognizable svg variable type");return n.select("defs").append(r)}function i(e,t){{var r=n(e,t.classname).clone();p(r.node,t.content)}return e.svgel.append(r),r}function o(e,t){var n=t.clone().attr();e.svgel.append(n);var r=n.getBBox();return n.remove(),r}function a(e){return e.getAttribute("x1")==e.getAttribute("x2")}function s(e){var t={};e.graph.eachNode(function(r,i){var a=i.classname,s=t[a]||(t[a]=o(e,n(e,a)));i.attr("width",s.width),i.attr("height",s.height)})}function u(e,t){e.eachNode(function(e,n){var r=t.graph.node(e);r.attr("x",n.x),r.attr("y",n.y);var o=n.x-n.width/2,a=n.y-n.height/2;r.add_attr(":first","transform","translate("+o+","+a+")"),r.transform(n),i(t,r)})}function c(e){return s(e),e.run(e.graph)}function d(e,t,n,r){var o=Object.create(t);return o.content={},o.content[n]=r.map(function(e){return{":first":e}}),i(e,o),r}function f(t){var r={classname:t.config.edgeClass};t.svgel.clear();var s=c(t);u(s,t);var f=s.graph(),h=f.rankDir,l="TB"==h||"BT"==h,p=e("./edges.js")(t,s);d(t,r,".Edge",p);var g=o(t,n(t,t.config.intersectionClass)),v=[g.width/2,g.height/2];p.forEach(function(e,n){p.forEach(function(r,o){if(o>n&&e.x1!=r.x1&&e.x2!=r.x2&&e.y1!=r.y1&&e.y2!=r.y2&&e.x1!=r.x2&&e.y1!=r.y2&&e.x1!=r.y1&&e.x2!=r.y2&&e.x1!=r.y2&&e.x2!=r.y1){var s=m(e,r);if(8==s[0]){var u=y.$id(e.id),c=y.$id(r.id),d=4&u.compareDocumentPosition(c)?u:c,f=i(t,{classname:t.config.intersectionClass,content:{}});a(d)?f.transform(new Snap.Matrix(1,0,0,1,0,0).rotate(90,s[1][0],s[1][1]).toTransformString()).transform(f.matrix.translate(s[1][0]-v[0],s[1][1]-v[1])):f.transform(new Snap.Matrix(1,0,0,1,s[1][0]-v[0],s[1][1]-v[1])),y.insertAfter(d.parentNode,f.node,d.nextSibling)}}})});var E=new Snap.Matrix(1,0,0,1,0,0);if("LR"==h||"RL"==h){f.height=f.height+2*p.growth;var E=E.translate(0,p.growth)}else{f.width=f.width+2*p.growth;var E=E.translate(p.growth,0)}return t.svgel.attr({width:f.width,height:f.height}).transform(E.toTransformString()),l?t.config.height=t.config.height+p.growth:t.config.width=t.config.width+p.growth,t.svgel.parent().attr({width:f.width+2*t.config.padding,height:f.height+2*t.config.padding}),t}var h=(e("viral"),e("enslave")),l=e("dagre"),p=e("hyperglue"),g=(e("zippy"),e("../util/pluck.js")),v=(e("../util/defaults.js"),e("../util/unique_id.js")),y=e("../util/dom.js"),m=e("./intersect.js"),E=(Math.floor,Math.ceil,Math.min,Math.max,g("node"),g("cut"),e("../util/emitter.js")),_=E.extend(l.layout());t.exports=_.extend({init:function(e,t){this.config=e,Object.keys(e.layout_config).forEach(function(t){this[t](e.layout_config[t])},this),this.rankSimplex=!0,this.graph=t,this.id=v(),this.svgel=Snap.apply(Snap,e.snap_args).g().attr({transform:"translate(20,20)",id:this.id}),this.node=this.svgel.parent().node},display:h(f),draw:h(i),to_defs:h(r)})}()},{"../util/defaults.js":59,"../util/dom.js":60,"../util/emitter.js":61,"../util/pluck.js":62,"../util/unique_id.js":64,"./edges.js":2,"./intersect.js":3,dagre:8,enslave:53,hyperglue:54,viral:57,zippy:58}],2:[function(e,t){void function(){function n(e,t){var n=e.node(t);return n.id=t,n}function r(e,t){return{x:e||0,y:t||0}}function i(e,t){var n=r(e.x,e.y),i=e.width/2,o=e.height/2,a=l([-i,-o],n),s=l([i,-o],n),u=l([-i,o],n),c=l([i,o],n);switch(t){case"L":return[a,u];case"R":return[s,c];case"B":return[u,c];case"T":return[a,s]}}function o(e,t){for(var n=e[0].x,r=e[0].y,i=e[1].x,o=e[1].y,a=i-n,s=o-r,u=[],c=a/(t+1),d=s/(t+1),f=0;f++<t;)u.push(l([f*c,f*d],e[0]));return u}function a(e,t){{var r=[],i=t.graph(),o=i.rankDir,a="TB"==o||"BT"==o,u=a?"y":"x",c=s.bind(null,e.config.rank_detection_error_margin,u),d=n.bind(null,t);n.bind(null,t)}return t.eachNode(function(e,n){n.rdim=Number(c(n)),n.targets=t.outEdges(e).map(t.target.bind(t)).map(d),n.sources=t.inEdges(e).map(t.source.bind(t)).map(d),r.push(n)}),r}function s(e,t,n){return Math.ceil(n[t]/e)*e}function u(e,t){return{id:h(),x1:e.x,y1:e.y,x2:t.x,y2:t.y}}function c(e,t,n){return{x:e?n:t,y:e?t:n}}function d(e,t,n){return e[t.id]=n,e}var f=e("zippy"),h=(f.zip,f.zipWith,e("../util/unique_id.js")),l=e("../util/translate.js");t.exports=function(e,t){function n(e,t,n){var r=c(p,n.exit.junction[v],t),i=c(p,n.entry.junction[v],t);return e.concat([u(n.exit,n.exit.junction),u(n.exit.junction,r),u(r,i),u(i,n.entry.junction),u(n.entry.junction,n.entry)])}var r=e.config.layout_config.rankSep,s=t.graph(),f=s.rankDir,h="BT"==f||"RL"==f,p="TB"==f||"BT"==f,g=p?"width":"height",v=p?"y":"x",y=a(e,t),m=e.config.skipSep,E=y.reduce(function(e,t){var n=t.rdim;return(e[n]||(e[n]=[])).push(t),e},{}),_=Object.keys(E).sort(function(e,t){return+e-+t}).map(function(e){return this[e]},E);y=y.map(function(e){var t=o(i(e,f[1]),e.targets.length);e.exit_points=t.map(function(t,n){return t.tid=e.targets[n].id,t.node=e,t}),e.exits=e.targets.reduce(d,{});var n=o(i(e,f[0]),e.sources.length);return e.entry_points=n.map(function(t,n){return t.sid=e.sources[n].id,t.node=e,t}),e.entries=e.sources.reduce(d,{}),e});var x=y.reduce(function(e,t){return e[t.id]=t,e},{});_.push([]),_=_.map(function(e,t){return{nodes:e.map(function(e){return e.true_rank=t,e}),exits:(0!=t?_[t-1]:[]).reduce(function(e,t){return e=e.concat(t.exit_points)},[]),entries:e.reduce(function(e,t){return e=e.concat(t.entry_points)},[]),node_ids:e.map(function(e){return e.id})}}).map(function(e,t){function n(t){return e.steps.every(function(e){return e.exit!=t&&e.entry!=t})}return e.steps=e.exits.filter(function(t){return e.node_ids.indexOf(t.tid)>-1}).map(function(e){var t=x[e.tid];return{exit:e,entry:t.entry_points[t.entries[e.node.id]]}}).reduce(function(e,t){return e.some(function(e){return e.exit.node==t.node}),e.push(t),e},[]),e.forward_skips=e.exits.filter(function(e){return x[e.tid].true_rank-t>0}).map(function(e){var t=x[e.tid];return{exit:e,entry:t.entry_points[t.entries[e.node.id]]}}),e.backward_skips=e.entries.filter(function(e){return x[e.sid].true_rank-t>=0}).map(function(e){var t=x[e.sid];return{exit:t.exit_points[t.exits[e.node.id]],entry:e}}),e.skippoints={exits:e.exits.filter(n),entries:e.entries.filter(n)},e}).map(function(e){return e.psep=r/(e.entries.length+e.exits.length-e.steps.length+1),e.steps=e.steps.map(function(t,n){var i=e.psep*(n+1);return h&&(i=-1*i),t.exit_junction=l(p?[0,i]:[i,0],t.exit),t.entry_junction=l(p?[0,i-(h?-1*r:r)]:[i-(h?-1*r:r),0],t.entry),t}),e.skippoints.exits=e.skippoints.exits.map(function(t,n){var r=e.psep*(n+e.steps.length+1);return h&&(r=-1*r),t.junction=l(p?[0,r]:[r,0],t),t}),e.skippoints.entries=e.skippoints.entries.map(function(t,n){var i=e.psep*(n+e.steps.length+e.skippoints.exits.length+1);return h&&(i=-1*i),t.junction=l(p?[0,i-(h?-1*r:r)]:[i-(h?-1*r:r),0],t),t}),e});var k=_.reduce(function(e,t,r){var i=_.slice(0,r).reduce(function(e,t){return e+t.forward_skips.length},1),o=_.slice(0,r).reduce(function(e,t){return e+t.backward_skips.length},1);return e.concat(t.steps.reduce(function(e,t){return e.concat([u(t.exit,t.exit_junction),u(t.exit_junction,t.entry_junction),u(t.entry_junction,t.entry)])},[]).concat(t.forward_skips.reduce(function(e,t,r){var o=(i+r)*m,a=h?0-o:s[g]+o;return n(e,a,t)},[])).concat(t.backward_skips.reduce(function(e,t,r){var i=(o+r)*m,a=h?s[g]+i:0-i;return n(e,a,t)},[])))},[]);return k.growth=_.reduce(function(e,t){return e+t.forward_skips.length+t.backward_skips.length},0)*m,k}}()},{"../util/translate.js":63,"../util/unique_id.js":64,zippy:58}],3:[function(e,t){void function(){var n=e("../util/vectors.js");t.exports=function(e,t){var r=[e.x1,e.y1],i=n.subtract([e.x2,e.y2],r),o=[t.x1,t.y1],a=n.subtract([t.x2,t.y2],o),s=n.cross(i,a),u=n.subtract(o,r),c=n.cross(u,i);if(0==s){if(0!=c)return[4];var d=n.dot(i,i),f=n.dot(u,i),h=n.dot(a,a),l=n.dot(u,a);return f>=0&&d>=f||l>=0&&h>=l?[1]:[2]}var p=n.cross(u,a)/s;if(0>p||p>1)return[16];var g=n.cross(u,i)/s;return 0>g||g>1?[16]:[8,n.add(r,n.scale(i,p))]}}()},{"../util/vectors.js":65}],4:[function(e,t){void function(){var n=(e("enslave"),e("./node.js")),r=e("../util/unique_id.js"),i=n.extend({init:function(e,t,n){this.id=r(),this.type="edge",this.graph=e,this.source=t,this.target=n}});t.exports=i}()},{"../util/unique_id.js":64,"./node.js":6,enslave:53}],5:[function(e,t){void function(){function n(e,t,n,r,i){var o=u.make(e,n,{classname:t,content:r,rank:i});return e.addNode(o.id,o),o}function r(e,t){return e.hasNode(t)?(char.delNode(t),!0):!1}function i(e,t,n,r){var i=c.make(e,n,r);return e.addEdge(i.id,n.id,r.id,i),i}function o(e,t,n){var r=e.outEdges(t.id,n.id);return e.hasEdge(r)?(e.delEdge(r),!0):!1}var a=(e("viral"),e("enslave")),s=e("dagre"),u=(e("../util/unique_id.js"),e("./node.js")),c=e("./edge.js"),d=e("../util/emitter.js"),f=d.extend(s.Digraph.prototype).extend({init:function(){s.Digraph.call(this)}});t.exports=f.extend({add_node:a(n),del_node:a(r),connect:a(i),disconnect:a(o)})}()},{"../util/emitter.js":61,"../util/unique_id.js":64,"./edge.js":4,"./node.js":6,dagre:8,enslave:53,viral:57}],6:[function(e,t){void function(){function n(e,t){Object.keys(t).forEach(function(n){e[n]=t[n]}),e.graph.emit(e.type+"_attrs",t)}function r(e,t,n){e[t]=n,e.graph.emit(e.type+"_attr",t,n)}function i(e,t,n,r){e.content[t]=e.content[t]||{},e.content[t][n]=r}function o(e,t){e.content[t]=value}var a=e("viral"),s=e("enslave"),u=e("../util/unique_id.js");t.exports=a.extend({init:function(e,t,r){this.id=u(),this.type="vertex",this.graph=e,this.transform=t.bind(null,this),n(this,r)},attrs:s(n),attr:s(r),add_attr:s(i),add_attrs:s(o)})}()},{"../util/unique_id.js":64,enslave:53,viral:57}],7:[function(e,t){void function(){function n(e){var t={width:window.innerWidth,height:window.innerHeight,font_size:21,line_height:26};return null==e?t:o(e,t)}function r(e){return a.make(e)}function i(e,t){return s.make(e,t)}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var o=e("./util/defaults.js"),a=e("./graph/graph.js"),s=e("./diagram/diagram.js");t.exports={config:n,graph:r,diagram:i}}()},{"./diagram/diagram.js":1,"./graph/graph.js":5,"./util/defaults.js":59}],8:[function(e,t,n){n.Digraph=e("graphlib").Digraph,n.Graph=e("graphlib").Graph,n.layout=e("./lib/layout"),n.version=e("./lib/version")},{"./lib/layout":9,"./lib/version":24,graphlib:30}],9:[function(e,t){var n=e("./util"),r=e("./rank"),i=e("./order"),o=e("graphlib").CGraph,a=e("graphlib").CDigraph;t.exports=function(){function t(e){var t=new a;e.eachNode(function(e,n){void 0===n&&(n={}),t.addNode(e,{width:n.width,height:n.height}),n.hasOwnProperty("rank")&&(t.node(e).prefRank=n.rank)}),e.parent&&e.nodes().forEach(function(n){t.parent(n,e.parent(n))}),e.eachEdge(function(e,n,r,i){void 0===i&&(i={});var o={e:e,minLen:i.minLen||1,width:i.width||0,height:i.height||0,points:[]};t.addEdge(null,n,r,o)});var n=e.graph()||{};return t.graph({rankDir:n.rankDir||l.rankDir,orderRestarts:n.orderRestarts}),t}function s(e){var o,a=g.rankSep();try{return o=n.time("initLayoutGraph",t)(e),0===o.order()?o:(o.eachEdge(function(e,t,n,r){r.minLen*=2}),g.rankSep(a/2),n.time("rank.run",r.run)(o,l.rankSimplex),n.time("normalize",u)(o),n.time("order",i)(o,l.orderMaxSweeps),n.time("position",p.run)(o),n.time("undoNormalize",c)(o),n.time("fixupEdgePoints",d)(o),n.time("rank.restoreEdges",r.restoreEdges)(o),n.time("createFinalGraph",f)(o,e.isDirected()))}finally{g.rankSep(a)}}function u(e){var t=0;e.eachEdge(function(n,r,i,o){var a=e.node(r).rank,s=e.node(i).rank;if(s>a+1){for(var u=r,c=a+1,d=0;s>c;++c,++d){var f="_D"+ ++t,h={width:o.width,height:o.height,edge:{id:n,source:r,target:i,attrs:o},rank:c,dummy:!0};0===d?h.index=0:c+1===s&&(h.index=1),e.addNode(f,h),e.addEdge(null,u,f,{}),u=f}e.addEdge(null,u,i,{}),e.delEdge(n)}})}function c(e){e.eachNode(function(t,n){if(n.dummy){if("index"in n){var r=n.edge;e.hasEdge(r.id)||e.addEdge(r.id,r.source,r.target,r.attrs);var i=e.edge(r.id).points;i[n.index]={x:n.x,y:n.y,ul:n.ul,ur:n.ur,dl:n.dl,dr:n.dr}}e.delNode(t)}})}function d(e){e.eachEdge(function(e,t,n,r){r.reversed&&r.points.reverse()})}function f(e,t){var n=t?new a:new o;n.graph(e.graph()),e.eachNode(function(e,t){n.addNode(e,t)}),e.eachNode(function(t){n.parent(t,e.parent(t))}),e.eachEdge(function(e,t,r,i){n.addEdge(i.e,t,r,i)});var r=0,i=0;return e.eachNode(function(t,n){e.children(t).length||(r=Math.max(r,n.x+n.width/2),i=Math.max(i,n.y+n.height/2))}),e.eachEdge(function(e,t,n,o){var a=Math.max.apply(Math,o.points.map(function(e){return e.x})),s=Math.max.apply(Math,o.points.map(function(e){return e.y}));r=Math.max(r,a+o.width/2),i=Math.max(i,s+o.height/2)}),n.graph().width=r,n.graph().height=i,n}function h(e){return function(){return arguments.length?(e.apply(null,arguments),g):e()}}var l={debugLevel:0,orderMaxSweeps:i.DEFAULT_MAX_SWEEPS,rankSimplex:!1,rankDir:"TB"},p=e("./position")(),g={};return g.orderIters=n.propertyAccessor(g,l,"orderMaxSweeps"),g.rankSimplex=n.propertyAccessor(g,l,"rankSimplex"),g.nodeSep=h(p.nodeSep),g.edgeSep=h(p.edgeSep),g.universalSep=h(p.universalSep),g.rankSep=h(p.rankSep),g.rankDir=n.propertyAccessor(g,l,"rankDir"),g.debugAlignment=h(p.debugAlignment),g.debugLevel=n.propertyAccessor(g,l,"debugLevel",function(e){n.log.level=e,p.debugLevel(e)}),g.run=n.time("Total layout",s),g._normalize=u,g}},{"./order":10,"./position":15,"./rank":16,"./util":23,graphlib:30}],10:[function(e,t){function n(e,t){function n(){e.eachNode(function(e,t){l[e]=t.order})}arguments.length<2&&(t=p);var r=e.graph().orderRestarts||0,i=f(e);i.forEach(function(t){t=t.filterNodes(function(t){return!e.children(t).length})});for(var o,s=0,u=Number.MAX_VALUE,l={},g=0;g<Number(r)+1&&0!==u;++g){o=Number.MAX_VALUE,h(e,r>0),c.log(2,"Order phase start cross count: "+e.graph().orderInitCC);var v,y,m;for(v=0,y=0;4>y&&t>v&&o>0;++v,++y,++s)a(e,i,v),m=d(e),o>m&&(y=0,o=m,u>m&&(n(),u=m)),c.log(3,"Order phase start "+g+" iter "+v+" cross count: "+m)}Object.keys(l).forEach(function(t){e.children&&e.children(t).length||(e.node(t).order=l[t])}),e.graph().orderCC=u,c.log(2,"Order iterations: "+s),c.log(2,"Order phase best cross count: "+e.graph().orderCC)}function r(e,t){var n={};return t.forEach(function(t){n[t]=e.inEdges(t).map(function(t){return e.node(e.source(t)).order})}),n}function o(e,t){var n={};return t.forEach(function(t){n[t]=e.outEdges(t).map(function(t){return e.node(e.target(t)).order})}),n}function a(e,t,n){n%2===0?s(e,t,n):u(e,t,n)}function s(e,t){var n;for(i=1;i<t.length;++i)n=l(t[i],n,r(e,t[i].nodes()))}function u(e,t){var n;for(i=t.length-2;i>=0;--i)l(t[i],n,o(e,t[i].nodes()))}var c=e("./util"),d=e("./order/crossCount"),f=e("./order/initLayerGraphs"),h=e("./order/initOrder"),l=e("./order/sortLayer");t.exports=n;var p=24;n.DEFAULT_MAX_SWEEPS=p},{"./order/crossCount":11,"./order/initLayerGraphs":12,"./order/initOrder":13,"./order/sortLayer":14,"./util":23}],11:[function(e,t){function n(e){for(var t=0,n=i.ordering(e),o=1;o<n.length;++o)t+=r(e,n[o-1],n[o]);return t}function r(e,t,n){var r=[];t.forEach(function(t){var n=[];e.outEdges(t).forEach(function(t){n.push(e.node(e.target(t)).order)}),n.sort(function(e,t){return e-t}),r=r.concat(n)});for(var i=1;i<n.length;)i<<=1;var o=2*i-1;i-=1;for(var a=[],s=0;o>s;++s)a[s]=0;var u=0;return r.forEach(function(e){var t=e+i;for(++a[t];t>0;)t%2&&(u+=a[t+1]),t=t-1>>1,++a[t]}),u}var i=e("../util");t.exports=n},{"../util":23}],12:[function(e,t){function n(e){function t(r){if(null===r)return void e.children(r).forEach(function(e){t(e)});var o=e.node(r);o.minRank="rank"in o?o.rank:Number.MAX_VALUE,o.maxRank="rank"in o?o.rank:Number.MIN_VALUE;var a=new i;return e.children(r).forEach(function(n){var r=t(n);a=i.union([a,r]),o.minRank=Math.min(o.minRank,e.node(n).minRank),o.maxRank=Math.max(o.maxRank,e.node(n).maxRank)}),"rank"in o&&a.add(o.rank),a.keys().forEach(function(e){e in n||(n[e]=[]),n[e].push(r)}),a}var n=[];t(null);var o=[];return n.forEach(function(t,n){o[n]=e.filterNodes(r(t))}),o}var r=e("graphlib").filter.nodesFromList,i=e("cp-data").Set;t.exports=n},{"cp-data":25,graphlib:30}],13:[function(e,t){function n(e,t){var n=[];e.eachNode(function(t,r){var i=n[r.rank];e.children&&e.children(t).length>0||(i||(i=n[r.rank]=[]),i.push(t))}),n.forEach(function(n){t&&i.shuffle(n),n.forEach(function(t,n){e.node(t).order=n})});var o=r(e);e.graph().orderInitCC=o,e.graph().orderCC=Number.MAX_VALUE}var r=e("./crossCount"),i=e("../util");t.exports=n},{"../util":23,"./crossCount":11}],14:[function(e,t){function n(e,t,n){var i=[],o={};e.eachNode(function(e,t){i[t.order]=e;var a=n[e];a.length&&(o[e]=r.sum(a)/a.length)});var a=e.nodes().filter(function(e){return void 0!==o[e]});a.sort(function(t,n){return o[t]-o[n]||e.node(t).order-e.node(n).order});for(var s=0,u=0,c=a.length;c>u;++s)void 0!==o[i[s]]&&(e.node(a[u++]).order=s)}var r=e("../util");t.exports=n},{"../util":23}],15:[function(e,t){var n=e("./util");t.exports=function(){function e(e){e=e.filterNodes(n.filterNonSubgraphs(e));var t=n.ordering(e),a=r(e,t),s={};["u","d"].forEach(function(n){"d"===n&&t.reverse(),["l","r"].forEach(function(r){"r"===r&&d(t);var u=n+r,f=i(e,t,a,"u"===n?"predecessors":"successors");s[u]=o(e,t,f.pos,f.root,f.align),m.debugLevel>=3&&y(n+r,e,t,s[u]),"r"===r&&c(s[u]),"r"===r&&d(t)}),"d"===n&&t.reverse()}),u(e,t,s),e.eachNode(function(t){var n=[];for(var r in s){var i=s[r][t];g(r,e,t,i),n.push(i)}n.sort(function(e,t){return e-t}),p(e,t,(n[1]+n[2])/2)});var l=0,E="BT"===e.graph().rankDir||"RL"===e.graph().rankDir;t.forEach(function(t){var r=n.max(t.map(function(t){return h(e,t)}));l+=r/2,t.forEach(function(t){v(e,t,E?-l:l)}),l+=r/2+m.rankSep});var _=n.min(e.nodes().map(function(t){return p(e,t)-f(e,t)/2})),x=n.min(e.nodes().map(function(t){return v(e,t)-h(e,t)/2}));e.eachNode(function(t){p(e,t,p(e,t)-_),v(e,t,v(e,t)-x)})}function t(e,t){return t>e?e.toString().length+":"+e+"-"+t:t.toString().length+":"+t+"-"+e}function r(e,n){function r(e){var n=d[e];(a>n||n>u)&&(c[t(o[s],e)]=!0)}var i,o,a,s,u,c={},d={};if(n.length<=2)return c;n[1].forEach(function(e,t){d[e]=t});for(var f=1;f<n.length-1;++f){i=n[f],o=n[f+1],a=0,s=0;for(var h=0;h<o.length;++h){var l=o[h];if(d[l]=h,u=void 0,e.node(l).dummy){var p=e.predecessors(l)[0];void 0!==p&&e.node(p).dummy&&(u=d[p])}if(void 0===u&&h===o.length-1&&(u=i.length-1),void 0!==u){for(;h>=s;++s)e.predecessors(o[s]).forEach(r);a=u}}}return c}function i(e,n,r,i){var o={},a={},s={};return n.forEach(function(e){e.forEach(function(e,t){a[e]=e,s[e]=e,o[e]=t})}),n.forEach(function(n){var u=-1;n.forEach(function(n){var c,d=e[i](n);d.length>0&&(d.sort(function(e,t){return o[e]-o[t]}),c=(d.length-1)/2,d.slice(Math.floor(c),Math.ceil(c)+1).forEach(function(e){s[n]===n&&!r[t(e,n)]&&u<o[e]&&(s[e]=n,s[n]=a[n]=a[e],u=o[e])}))})}),{pos:o,root:a,align:s}}function o(e,t,r,i,o){function a(e,t,n){c[e][t]=t in c[e]?Math.min(c[e][t],n):n}function s(t){if(!(t in h)){h[t]=0;var n=t;do{if(r[n]>0){var c=i[f[n]];s(c),u[t]===t&&(u[t]=u[c]);var d=l(e,f[n])+l(e,n);u[t]!==u[c]?a(u[c],u[t],h[t]-h[c]-d):h[t]=Math.max(h[t],h[c]+d)}n=o[n]}while(n!==t)}}var u={},c={},d={},f={},h={};return t.forEach(function(e){e.forEach(function(t,n){u[t]=t,c[t]={},n>0&&(f[t]=e[n-1])})}),n.values(i).forEach(function(e){s(e)}),t.forEach(function(e){e.forEach(function(e){if(h[e]=h[i[e]],e===i[e]&&e===u[e]){var t=0;e in c&&Object.keys(c[e]).length>0&&(t=n.min(Object.keys(c[e]).map(function(t){return c[e][t]+(t in d?d[t]:0)}))),d[e]=t}})}),t.forEach(function(e){e.forEach(function(e){h[e]+=d[u[i[e]]]||0})}),h}function a(e,t,r){return n.min(t.map(function(e){var t=e[0];return r[t]}))}function s(e,t,r){return n.max(t.map(function(e){var t=e[e.length-1];return r[t]}))}function u(e,t,n){function r(e){n[f][e]+=c[f]}var i,o={},u={},c={},d=Number.POSITIVE_INFINITY;for(var f in n){var h=n[f];o[f]=a(e,t,h),u[f]=s(e,t,h);var l=u[f]-o[f];d>l&&(d=l,i=f)}["u","d"].forEach(function(e){["l","r"].forEach(function(t){var n=e+t;c[n]="l"===t?o[i]-o[n]:u[i]-u[n]})});for(f in n)e.eachNode(r)}function c(e){for(var t in e)e[t]=-e[t]}function d(e){e.forEach(function(e){e.reverse()})}function f(e,t){switch(e.graph().rankDir){case"LR":return e.node(t).height;case"RL":return e.node(t).height;default:return e.node(t).width}}function h(e,t){switch(e.graph().rankDir){case"LR":return e.node(t).width;case"RL":return e.node(t).width;default:return e.node(t).height}}function l(e,t){if(null!==m.universalSep)return m.universalSep;var n=f(e,t),r=e.node(t).dummy?m.edgeSep:m.nodeSep;return(n+r)/2}function p(e,t,n){if("LR"===e.graph().rankDir||"RL"===e.graph().rankDir){if(arguments.length<3)return e.node(t).y;e.node(t).y=n}else{if(arguments.length<3)return e.node(t).x;e.node(t).x=n}}function g(e,t,n,r){if("LR"===t.graph().rankDir||"RL"===t.graph().rankDir){if(arguments.length<3)return t.node(n)[e];t.node(n)[e]=r}else{if(arguments.length<3)return t.node(n)[e];t.node(n)[e]=r}}function v(e,t,n){if("LR"===e.graph().rankDir||"RL"===e.graph().rankDir){if(arguments.length<3)return e.node(t).x;e.node(t).x=n}else{if(arguments.length<3)return e.node(t).y;e.node(t).y=n}}function y(e,t,n,r){n.forEach(function(n,i){var o,a;n.forEach(function(n){var s=r[n];if(o){var u=l(t,o)+l(t,n);u>s-a&&console.log("Position phase: sep violation. Align: "+e+". Layer: "+i+". U: "+o+" V: "+n+". Actual sep: "+(s-a)+" Expected sep: "+u)}o=n,a=s})})}var m={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30},E={};return E.nodeSep=n.propertyAccessor(E,m,"nodeSep"),E.edgeSep=n.propertyAccessor(E,m,"edgeSep"),E.universalSep=n.propertyAccessor(E,m,"universalSep"),E.rankSep=n.propertyAccessor(E,m,"rankSep"),E.debugLevel=n.propertyAccessor(E,m,"debugLevel"),E.run=e,E}},{"./util":23}],16:[function(e,t,n){function r(e,t){o(e),f.time("constraints.apply",g.apply)(e),a(e),f.time("acyclic",h)(e);var n=e.filterNodes(f.filterNonSubgraphs(e));l(n),y(n).forEach(function(e){var r=n.filterNodes(m.nodesFromList(e));c(r,t)}),f.time("constraints.relax",g.relax(e)),f.time("reorientEdges",u)(e)}function i(e){h.undo(e)}function o(e){e.eachEdge(function(t,n,r,i){if(n===r){var o=s(e,t,n,r,i,0,!1),a=s(e,t,n,r,i,1,!0),u=s(e,t,n,r,i,2,!1);e.addEdge(null,o,n,{minLen:1,selfLoop:!0}),e.addEdge(null,o,a,{minLen:1,selfLoop:!0}),e.addEdge(null,n,u,{minLen:1,selfLoop:!0}),e.addEdge(null,a,u,{minLen:1,selfLoop:!0}),e.delEdge(t)}})}function a(e){e.eachEdge(function(t,n,r,i){if(n===r){var o=i.originalEdge,a=s(e,o.e,o.u,o.v,o.value,0,!0);e.addEdge(null,n,a,{minLen:1}),e.addEdge(null,a,r,{minLen:1}),e.delEdge(t)}})}function s(e,t,n,r,i,o,a){return e.addNode(null,{width:a?i.width:0,height:a?i.height:0,edge:{id:t,source:n,target:r,attrs:i},dummy:!0,index:o})}function u(e){e.eachEdge(function(t,n,r,i){e.node(n).rank>e.node(r).rank&&(e.delEdge(t),i.reversed=!0,e.addEdge(t,r,n,i))})}function c(e,t){var n=p(e);t&&(f.log(1,"Using network simplex for ranking"),v(e,n)),d(e)}function d(e){var t=f.min(e.nodes().map(function(t){return e.node(t).rank}));e.eachNode(function(e,n){n.rank-=t})}var f=e("./util"),h=e("./rank/acyclic"),l=e("./rank/initRank"),p=e("./rank/feasibleTree"),g=e("./rank/constraints"),v=e("./rank/simplex"),y=e("graphlib").alg.components,m=e("graphlib").filter;n.run=r,n.restoreEdges=i},{"./rank/acyclic":17,"./rank/constraints":18,"./rank/feasibleTree":19,"./rank/initRank":20,"./rank/simplex":22,"./util":23,graphlib:30}],17:[function(e,t){function n(e){function t(i){i in r||(r[i]=n[i]=!0,e.outEdges(i).forEach(function(r){var a,s=e.target(r);i===s?console.error('Warning: found self loop "'+r+'" for node "'+i+'"'):s in n?(a=e.edge(r),e.delEdge(r),a.reversed=!0,++o,e.addEdge(r,s,i,a)):t(s)}),delete n[i])}var n={},r={},o=0;return e.eachNode(function(e){t(e)}),i.log(2,"Acyclic Phase: reversed "+o+" edge(s)"),o}function r(e){e.eachEdge(function(t,n,r,i){i.reversed&&(delete i.reversed,e.delEdge(t),e.addEdge(t,r,n,i))})}var i=e("../util");t.exports=n,t.exports.undo=r},{"../util":23}],18:[function(e,t,n){function r(e){return"min"!==e&&"max"!==e&&0!==e.indexOf("same_")?(console.error("Unsupported rank type: "+e),!1):!0}function i(e,t,n,r){e.inEdges(t).forEach(function(t){var i,o=e.edge(t);i=o.originalEdge?o:{originalEdge:{e:t,u:e.source(t),v:e.target(t),value:o},minLen:e.edge(t).minLen},o.selfLoop&&(r=!1),r?(e.addEdge(null,n,e.source(t),i),i.reversed=!0):e.addEdge(null,e.source(t),n,i)})}function o(e,t,n,r){e.outEdges(t).forEach(function(t){var i,o=e.edge(t);i=o.originalEdge?o:{originalEdge:{e:t,u:e.source(t),v:e.target(t),value:o},minLen:e.edge(t).minLen},o.selfLoop&&(r=!1),r?(e.addEdge(null,e.target(t),n,i),i.reversed=!0):e.addEdge(null,n,e.target(t),i)})}function a(e,t,n){void 0!==n&&e.children(t).forEach(function(t){t===n||e.outEdges(n,t).length||e.node(t).dummy||e.addEdge(null,n,t,{minLen:0})})}function s(e,t,n){void 0!==n&&e.children(t).forEach(function(t){t===n||e.outEdges(t,n).length||e.node(t).dummy||e.addEdge(null,t,n,{minLen:0})})}n.apply=function(e){function t(n){var u={};e.children(n).forEach(function(a){if(e.children(a).length)return void t(a);var s=e.node(a),c=s.prefRank;if(void 0!==c){if(!r(c))return;c in u?u.prefRank.push(a):u.prefRank=[a];var d=u[c];void 0===d&&(d=u[c]=e.addNode(null,{originalNodes:[]}),e.parent(d,n)),i(e,a,d,"min"===c),o(e,a,d,"max"===c),e.node(d).originalNodes.push({u:a,value:s,parent:n}),e.delNode(a)}}),a(e,n,u.min),s(e,n,u.max)}t(null)},n.relax=function(e){var t=[];e.eachEdge(function(e,n,r,i){var o=i.originalEdge;o&&t.push(o)}),e.eachNode(function(t,n){var r=n.originalNodes;r&&(r.forEach(function(t){t.value.rank=n.rank,e.addNode(t.u,t.value),e.parent(t.u,t.parent)}),e.delNode(t))}),t.forEach(function(t){e.addEdge(t.e,t.u,t.v,t.value)})}},{}],19:[function(e,t){function n(e){function t(n){var i=!0;return e.predecessors(n).forEach(function(o){a.has(o)&&!r(e,o,n)&&(a.has(n)&&(s.addNode(n,{}),a.remove(n),s.graph({root:n})),s.addNode(o,{}),s.addEdge(null,o,n,{reversed:!0}),a.remove(o),t(o),i=!1)}),e.successors(n).forEach(function(o){a.has(o)&&!r(e,n,o)&&(a.has(n)&&(s.addNode(n,{}),a.remove(n),s.graph({root:n})),s.addNode(o,{}),s.addEdge(null,n,o,{}),a.remove(o),t(o),i=!1)}),i}function n(){var t=Number.MAX_VALUE;a.keys().forEach(function(n){e.predecessors(n).forEach(function(i){if(!a.has(i)){var o=r(e,i,n);Math.abs(o)<Math.abs(t)&&(t=-o)}}),e.successors(n).forEach(function(i){if(!a.has(i)){var o=r(e,n,i);Math.abs(o)<Math.abs(t)&&(t=o)}})}),s.eachNode(function(n){e.node(n).rank-=t})}var a=new i(e.nodes()),s=new o;if(1===a.size()){var u=e.nodes()[0];return s.addNode(u,{}),s.graph({root:u}),s}for(;a.size();){for(var c=s.order()?s.nodes():a.keys(),d=0,f=c.length;f>d&&t(c[d]);++d);a.size()&&n()}return s}function r(e,t,n){var r=e.node(n).rank-e.node(t).rank,i=a.max(e.outEdges(t,n).map(function(t){return e.edge(t).minLen}));return r-i}var i=e("cp-data").Set,o=e("graphlib").Digraph,a=e("../util");t.exports=n},{"../util":23,"cp-data":25,graphlib:30}],20:[function(e,t){function n(e){var t=i(e);t.forEach(function(t){var n=e.inEdges(t);if(0===n.length)return void(e.node(t).rank=0);var i=n.map(function(t){return e.node(e.source(t)).rank+e.edge(t).minLen});e.node(t).rank=r.max(i)})}var r=e("../util"),i=e("graphlib").alg.topsort;t.exports=n},{"../util":23,graphlib:30}],21:[function(e,t){function n(e,t,n,r){return Math.abs(e.node(t).rank-e.node(n).rank)-r}t.exports={slack:n}},{}],22:[function(e,t){function n(e,t){for(r(e,t);;){var n=s(t);if(null===n)break;var i=u(e,t,n);c(e,t,n,i)}}function r(e,t){function n(r){var i=t.successors(r);for(var a in i){var s=i[a];n(s)}r!==t.graph().root&&o(e,t,r)}i(t),t.eachEdge(function(e,t,n,r){r.cutValue=0}),n(t.graph().root)}function i(e){function t(r){var i=e.successors(r),o=n;for(var a in i){var s=i[a];t(s),o=Math.min(o,e.node(s).low)}e.node(r).low=o,e.node(r).lim=n++}var n=0;t(e.graph().root)}function o(e,t,n){var r=t.inEdges(n)[0],i=[],o=t.outEdges(n);for(var s in o)i.push(t.target(o[s]));var u,c=0,d=0,f=0,h=0,l=0,p=e.outEdges(n);for(var g in p){var v=e.target(p[g]);for(u in i)a(t,v,i[u])&&d++;a(t,v,n)||h++}var y=e.inEdges(n);for(var m in y){var E=e.source(y[m]);for(u in i)a(t,E,i[u])&&f++;a(t,E,n)||l++}var _=0;for(u in i){var x=t.edge(o[u]).cutValue;t.edge(o[u]).reversed?_-=x:_+=x}t.edge(r).reversed?c-=_-d+f-h+l:c+=_-d+f-h+l,t.edge(r).cutValue=c}function a(e,t,n){return e.node(n).low<=e.node(t).lim&&e.node(t).lim<=e.node(n).lim}function s(e){var t=e.edges();for(var n in t){var r=t[n],i=e.edge(r);if(i.cutValue<0)return r}return null}function u(e,t,n){var r,i=t.source(n),o=t.target(n),s=t.node(o).lim<t.node(i).lim?o:i,u=!t.edge(n).reversed,c=Number.POSITIVE_INFINITY;if(e.eachEdge(u?function(i,o,u,d){if(i!==n&&a(t,o,s)&&!a(t,u,s)){var f=l.slack(e,o,u,d.minLen);c>f&&(c=f,r=i)}}:function(i,o,u,d){if(i!==n&&!a(t,o,s)&&a(t,u,s)){var f=l.slack(e,o,u,d.minLen);c>f&&(c=f,r=i)}}),void 0===r){var d=[],f=[];throw e.eachNode(function(e){a(t,e,s)?f.push(e):d.push(e)}),new Error("No edge found from outside of tree to inside")}return r}function c(e,t,n,i){function o(e){var n=t.inEdges(e);for(var r in n){var i=n[r],a=t.source(i),s=t.edge(i);o(a),t.delEdge(i),s.reversed=!s.reversed,t.addEdge(i,e,a,s)}}t.delEdge(n);var a=e.source(i),s=e.target(i);o(s);for(var u=a,c=t.inEdges(u);c.length>0;)u=t.source(c[0]),c=t.inEdges(u);t.graph().root=u,t.addEdge(null,a,s,{cutValue:0}),r(e,t),d(e,t)}function d(e,t){function n(r){var i=t.successors(r);i.forEach(function(t){var i=f(e,r,t);e.node(t).rank=e.node(r).rank+i,n(t)})}n(t.graph().root)}function f(e,t,n){var r=e.outEdges(t,n);if(r.length>0)return h.max(r.map(function(t){return e.edge(t).minLen}));var i=e.inEdges(t,n);return i.length>0?-h.max(i.map(function(t){return e.edge(t).minLen})):void 0}var h=e("../util"),l=e("./rankUtil");t.exports=n},{"../util":23,"./rankUtil":21}],23:[function(e,t,n){function r(e,t){return function(){var n=(new Date).getTime();try{return t.apply(null,arguments)}finally{o(1,e+" time: "+((new Date).getTime()-n)+"ms")}}}function o(e){o.level>=e&&console.log.apply(console,Array.prototype.slice.call(arguments,1))}n.min=function(e){return Math.min.apply(Math,e)},n.max=function(e){return Math.max.apply(Math,e)},n.all=function(e,t){for(var n=0;n<e.length;++n)if(!t(e[n]))return!1;return!0},n.sum=function(e){return e.reduce(function(e,t){return e+t},0)},n.values=function(e){return Object.keys(e).map(function(t){return e[t]})},n.shuffle=function(e){for(i=e.length-1;i>0;--i){var t=Math.floor(Math.random()*(i+1)),n=e[t];e[t]=e[i],e[i]=n}},n.propertyAccessor=function(e,t,n,r){return function(i){return arguments.length?(t[n]=i,r&&r(i),e):t[n]}},n.ordering=function(e){var t=[];return e.eachNode(function(e,n){var r=t[n.rank]||(t[n.rank]=[]);r[n.order]=e}),t},n.filterNonSubgraphs=function(e){return function(t){return 0===e.children(t).length}},r.enabled=!1,n.time=r,o.level=0,n.log=o},{}],24:[function(e,t){t.exports="0.4.5"},{}],25:[function(e,t,n){n.Set=e("./lib/Set"),n.PriorityQueue=e("./lib/PriorityQueue"),n.version=e("./lib/version")},{"./lib/PriorityQueue":26,"./lib/Set":27,"./lib/version":29}],26:[function(e,t){function n(){this._arr=[],this._keyIndices={}}t.exports=n,n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(e){return e.key})},n.prototype.has=function(e){return e in this._keyIndices},n.prototype.priority=function(e){var t=this._keyIndices[e];return void 0!==t?this._arr[t].priority:void 0},n.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");
return this._arr[0].key},n.prototype.add=function(e,t){var n=this._keyIndices;if(!(e in n)){var r=this._arr,i=r.length;return n[e]=i,r.push({key:e,priority:t}),this._decrease(i),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},n.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},n.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},n.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&(t=e>>1,!(n[t].priority<r));)this._swap(e,t),e=t},n.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}},{}],27:[function(e,t){function n(e){if(this._size=0,this._keys={},e)for(var t=0,n=e.length;n>t;++t)this.add(e[t])}function r(e){var t,n=Object.keys(e),r=n.length,i=new Array(r);for(t=0;r>t;++t)i[t]=e[n[t]];return i}var i=e("./util");t.exports=n,n.intersect=function(e){if(0===e.length)return new n;for(var t=new n(i.isArray(e[0])?e[0]:e[0].keys()),r=1,o=e.length;o>r;++r)for(var a=t.keys(),s=i.isArray(e[r])?new n(e[r]):e[r],u=0,c=a.length;c>u;++u){var d=a[u];s.has(d)||t.remove(d)}return t},n.union=function(e){for(var t=i.reduce(e,function(e,t){return e+(t.size?t.size():t.length)},0),r=new Array(t),o=0,a=0,s=e.length;s>a;++a)for(var u=e[a],c=i.isArray(u)?u:u.keys(),d=0,f=c.length;f>d;++d)r[o++]=c[d];return new n(r)},n.prototype.size=function(){return this._size},n.prototype.keys=function(){return r(this._keys)},n.prototype.has=function(e){return e in this._keys},n.prototype.add=function(e){return e in this._keys?!1:(this._keys[e]=e,++this._size,!0)},n.prototype.remove=function(e){return e in this._keys?(delete this._keys[e],--this._size,!0):!1}},{"./util":28}],28:[function(e,t,n){n.isArray=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.reduce="function"!=typeof Array.prototype.reduce?function(e,t,n){"use strict";if(null===e||"undefined"==typeof e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var r,i,o=e.length>>>0,a=!1;for(1<arguments.length&&(i=n,a=!0),r=0;o>r;++r)e.hasOwnProperty(r)&&(a?i=t(i,e[r],r,e):(i=e[r],a=!0));if(!a)throw new TypeError("Reduce of empty array with no initial value");return i}:function(e,t,n){return e.reduce(t,n)}},{}],29:[function(e,t){t.exports="1.1.3"},{}],30:[function(e,t,n){n.Graph=e("./lib/Graph"),n.Digraph=e("./lib/Digraph"),n.CGraph=e("./lib/CGraph"),n.CDigraph=e("./lib/CDigraph"),e("./lib/graph-converters"),n.alg={isAcyclic:e("./lib/alg/isAcyclic"),components:e("./lib/alg/components"),dijkstra:e("./lib/alg/dijkstra"),dijkstraAll:e("./lib/alg/dijkstraAll"),findCycles:e("./lib/alg/findCycles"),floydWarshall:e("./lib/alg/floydWarshall"),postorder:e("./lib/alg/postorder"),preorder:e("./lib/alg/preorder"),prim:e("./lib/alg/prim"),tarjan:e("./lib/alg/tarjan"),topsort:e("./lib/alg/topsort")},n.converter={json:e("./lib/converter/json.js")};var r=e("./lib/filter");n.filter={all:r.all,nodesFromList:r.nodesFromList},n.version=e("./lib/version")},{"./lib/CDigraph":32,"./lib/CGraph":33,"./lib/Digraph":34,"./lib/Graph":35,"./lib/alg/components":36,"./lib/alg/dijkstra":37,"./lib/alg/dijkstraAll":38,"./lib/alg/findCycles":39,"./lib/alg/floydWarshall":40,"./lib/alg/isAcyclic":41,"./lib/alg/postorder":42,"./lib/alg/preorder":43,"./lib/alg/prim":44,"./lib/alg/tarjan":45,"./lib/alg/topsort":46,"./lib/converter/json.js":48,"./lib/filter":49,"./lib/graph-converters":50,"./lib/version":52}],31:[function(e,t){function n(){this._value=void 0,this._nodes={},this._edges={},this._nextId=0}function r(e,t,n){(e[t]||(e[t]=new o)).add(n)}function i(e,t,n){var r=e[t];r.remove(n),0===r.size()&&delete e[t]}var o=e("cp-data").Set;t.exports=n,n.prototype.order=function(){return Object.keys(this._nodes).length},n.prototype.size=function(){return Object.keys(this._edges).length},n.prototype.graph=function(e){return 0===arguments.length?this._value:void(this._value=e)},n.prototype.hasNode=function(e){return e in this._nodes},n.prototype.node=function(e,t){var n=this._strictGetNode(e);return 1===arguments.length?n.value:void(n.value=t)},n.prototype.nodes=function(){var e=[];return this.eachNode(function(t){e.push(t)}),e},n.prototype.eachNode=function(e){for(var t in this._nodes){var n=this._nodes[t];e(n.id,n.value)}},n.prototype.hasEdge=function(e){return e in this._edges},n.prototype.edge=function(e,t){var n=this._strictGetEdge(e);return 1===arguments.length?n.value:void(n.value=t)},n.prototype.edges=function(){var e=[];return this.eachEdge(function(t){e.push(t)}),e},n.prototype.eachEdge=function(e){for(var t in this._edges){var n=this._edges[t];e(n.id,n.u,n.v,n.value)}},n.prototype.incidentNodes=function(e){var t=this._strictGetEdge(e);return[t.u,t.v]},n.prototype.addNode=function(e,t){if(void 0===e||null===e){do e="_"+ ++this._nextId;while(this.hasNode(e))}else if(this.hasNode(e))throw new Error("Graph already has node '"+e+"'");return this._nodes[e]={id:e,value:t},e},n.prototype.delNode=function(e){this._strictGetNode(e),this.incidentEdges(e).forEach(function(e){this.delEdge(e)},this),delete this._nodes[e]},n.prototype._addEdge=function(e,t,n,i,o,a){if(this._strictGetNode(t),this._strictGetNode(n),void 0===e||null===e){do e="_"+ ++this._nextId;while(this.hasEdge(e))}else if(this.hasEdge(e))throw new Error("Graph already has edge '"+e+"'");return this._edges[e]={id:e,u:t,v:n,value:i},r(o[n],t,e),r(a[t],n,e),e},n.prototype._delEdge=function(e,t,n){var r=this._strictGetEdge(e);i(t[r.v],r.u,e),i(n[r.u],r.v,e),delete this._edges[e]},n.prototype.copy=function(){var e=new this.constructor;return e.graph(this.graph()),this.eachNode(function(t,n){e.addNode(t,n)}),this.eachEdge(function(t,n,r,i){e.addEdge(t,n,r,i)}),e._nextId=this._nextId,e},n.prototype.filterNodes=function(e){var t=new this.constructor;return t.graph(this.graph()),this.eachNode(function(n,r){e(n)&&t.addNode(n,r)}),this.eachEdge(function(e,n,r,i){t.hasNode(n)&&t.hasNode(r)&&t.addEdge(e,n,r,i)}),t},n.prototype._strictGetNode=function(e){var t=this._nodes[e];if(void 0===t)throw new Error("Node '"+e+"' is not in graph");return t},n.prototype._strictGetEdge=function(e){var t=this._edges[e];if(void 0===t)throw new Error("Edge '"+e+"' is not in graph");return t}},{"cp-data":25}],32:[function(e,t){var n=e("./Digraph"),r=e("./compoundify"),i=r(n);t.exports=i,i.fromDigraph=function(e){var t=new i,n=e.graph();return void 0!==n&&t.graph(n),e.eachNode(function(e,n){void 0===n?t.addNode(e):t.addNode(e,n)}),e.eachEdge(function(e,n,r,i){void 0===i?t.addEdge(null,n,r):t.addEdge(null,n,r,i)}),t},i.prototype.toString=function(){return"CDigraph "+JSON.stringify(this,null,2)}},{"./Digraph":34,"./compoundify":47}],33:[function(e,t){var n=e("./Graph"),r=e("./compoundify"),i=r(n);t.exports=i,i.fromGraph=function(e){var t=new i,n=e.graph();return void 0!==n&&t.graph(n),e.eachNode(function(e,n){void 0===n?t.addNode(e):t.addNode(e,n)}),e.eachEdge(function(e,n,r,i){void 0===i?t.addEdge(null,n,r):t.addEdge(null,n,r,i)}),t},i.prototype.toString=function(){return"CGraph "+JSON.stringify(this,null,2)}},{"./Graph":35,"./compoundify":47}],34:[function(e,t){function n(){i.call(this),this._inEdges={},this._outEdges={}}var r=e("./util"),i=e("./BaseGraph"),o=e("cp-data").Set;t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.isDirected=function(){return!0},n.prototype.successors=function(e){return this._strictGetNode(e),Object.keys(this._outEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.predecessors=function(e){return this._strictGetNode(e),Object.keys(this._inEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.neighbors=function(e){return o.union([this.successors(e),this.predecessors(e)]).keys()},n.prototype.sources=function(){var e=this;return this._filterNodes(function(t){return 0===e.inEdges(t).length})},n.prototype.sinks=function(){var e=this;return this._filterNodes(function(t){return 0===e.outEdges(t).length})},n.prototype.source=function(e){return this._strictGetEdge(e).u},n.prototype.target=function(e){return this._strictGetEdge(e).v},n.prototype.inEdges=function(e,t){this._strictGetNode(e);var n=o.union(r.values(this._inEdges[e])).keys();return arguments.length>1&&(this._strictGetNode(t),n=n.filter(function(e){return this.source(e)===t},this)),n},n.prototype.outEdges=function(e,t){this._strictGetNode(e);var n=o.union(r.values(this._outEdges[e])).keys();return arguments.length>1&&(this._strictGetNode(t),n=n.filter(function(e){return this.target(e)===t},this)),n},n.prototype.incidentEdges=function(e,t){return arguments.length>1?o.union([this.outEdges(e,t),this.outEdges(t,e)]).keys():o.union([this.inEdges(e),this.outEdges(e)]).keys()},n.prototype.toString=function(){return"Digraph "+JSON.stringify(this,null,2)},n.prototype.addNode=function(e,t){return e=i.prototype.addNode.call(this,e,t),this._inEdges[e]={},this._outEdges[e]={},e},n.prototype.delNode=function(e){i.prototype.delNode.call(this,e),delete this._inEdges[e],delete this._outEdges[e]},n.prototype.addEdge=function(e,t,n,r){return i.prototype._addEdge.call(this,e,t,n,r,this._inEdges,this._outEdges)},n.prototype.delEdge=function(e){i.prototype._delEdge.call(this,e,this._inEdges,this._outEdges)},n.prototype._filterNodes=function(e){var t=[];return this.eachNode(function(n){e(n)&&t.push(n)}),t}},{"./BaseGraph":31,"./util":51,"cp-data":25}],35:[function(e,t){function n(){i.call(this),this._incidentEdges={}}var r=e("./util"),i=e("./BaseGraph"),o=e("cp-data").Set;t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.isDirected=function(){return!1},n.prototype.neighbors=function(e){return this._strictGetNode(e),Object.keys(this._incidentEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.incidentEdges=function(e,t){return this._strictGetNode(e),arguments.length>1?(this._strictGetNode(t),t in this._incidentEdges[e]?this._incidentEdges[e][t].keys():[]):o.union(r.values(this._incidentEdges[e])).keys()},n.prototype.toString=function(){return"Graph "+JSON.stringify(this,null,2)},n.prototype.addNode=function(e,t){return e=i.prototype.addNode.call(this,e,t),this._incidentEdges[e]={},e},n.prototype.delNode=function(e){i.prototype.delNode.call(this,e),delete this._incidentEdges[e]},n.prototype.addEdge=function(e,t,n,r){return i.prototype._addEdge.call(this,e,t,n,r,this._incidentEdges,this._incidentEdges)},n.prototype.delEdge=function(e){i.prototype._delEdge.call(this,e,this._incidentEdges,this._incidentEdges)}},{"./BaseGraph":31,"./util":51,"cp-data":25}],36:[function(e,t){function n(e){function t(n,r){i.has(n)||(i.add(n),r.push(n),e.neighbors(n).forEach(function(e){t(e,r)}))}var n=[],i=new r;return e.nodes().forEach(function(e){var r=[];t(e,r),r.length>0&&n.push(r)}),n}var r=e("cp-data").Set;t.exports=n},{"cp-data":25}],37:[function(e,t){function n(e,t,n,i){function o(t){var r=e.incidentNodes(t),i=r[0]!==u?r[0]:r[1],o=a[i],d=n(t),f=c.distance+d;if(0>d)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+d);f<o.distance&&(o.distance=f,o.predecessor=u,s.decrease(i,f))}var a={},s=new r;n=n||function(){return 1},i=i||(e.isDirected()?function(t){return e.outEdges(t)}:function(t){return e.incidentEdges(t)}),e.eachNode(function(e){var n=e===t?0:Number.POSITIVE_INFINITY;a[e]={distance:n},s.add(e,n)});for(var u,c;s.size()>0&&(u=s.removeMin(),c=a[u],c.distance!==Number.POSITIVE_INFINITY);)i(u).forEach(o);return a}var r=e("cp-data").PriorityQueue;t.exports=n},{"cp-data":25}],38:[function(e,t){function n(e,t,n){var i={};return e.eachNode(function(o){i[o]=r(e,o,t,n)}),i}var r=e("./dijkstra");t.exports=n},{"./dijkstra":37}],39:[function(e,t){function n(e){return r(e).filter(function(e){return e.length>1})}var r=e("./tarjan");t.exports=n},{"./tarjan":45}],40:[function(e,t){function n(e,t,n){var r={},i=e.nodes();return t=t||function(){return 1},n=n||(e.isDirected()?function(t){return e.outEdges(t)}:function(t){return e.incidentEdges(t)}),i.forEach(function(o){r[o]={},r[o][o]={distance:0},i.forEach(function(e){o!==e&&(r[o][e]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(n){var i=e.incidentNodes(n),a=i[0]!==o?i[0]:i[1],s=t(n);s<r[o][a].distance&&(r[o][a]={distance:s,predecessor:o})})}),i.forEach(function(e){var t=r[e];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[e],i=t[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}t.exports=n},{}],41:[function(e,t){function n(e){try{r(e)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}var r=e("./topsort");t.exports=n},{"./topsort":46}],42:[function(e,t){function n(e,t,n){function i(t,r){if(o.has(t))throw new Error("The input graph is not a tree: "+e);o.add(t),e.neighbors(t).forEach(function(e){e!==r&&i(e,t)}),n(t)}var o=new r;if(e.isDirected())throw new Error("This function only works for undirected graphs");i(t)}var r=e("cp-data").Set;t.exports=n},{"cp-data":25}],43:[function(e,t){function n(e,t,n){function i(t,r){if(o.has(t))throw new Error("The input graph is not a tree: "+e);o.add(t),n(t),e.neighbors(t).forEach(function(e){e!==r&&i(e,t)})}var o=new r;if(e.isDirected())throw new Error("This function only works for undirected graphs");i(t)}var r=e("cp-data").Set;t.exports=n},{"cp-data":25}],44:[function(e,t){function n(e,t){function n(n){var r=e.incidentNodes(n),i=r[0]!==o?r[0]:r[1],a=u.priority(i);if(void 0!==a){var c=t(n);a>c&&(s[i]=o,u.decrease(i,c))}}var o,a=new r,s={},u=new i;if(0===e.order())return a;e.eachNode(function(e){u.add(e,Number.POSITIVE_INFINITY),a.addNode(e)}),u.decrease(e.nodes()[0],0);for(var c=!1;u.size()>0;){if(o=u.removeMin(),o in s)a.addEdge(null,o,s[o]);else{if(c)throw new Error("Input graph is not connected: "+e);c=!0}e.incidentEdges(o).forEach(n)}return a}var r=e("../Graph"),i=e("cp-data").PriorityQueue;t.exports=n},{"../Graph":35,"cp-data":25}],45:[function(e,t){function n(e){function t(a){var s=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),e.successors(a).forEach(function(e){e in i?i[e].onStack&&(s.lowlink=Math.min(s.lowlink,i[e].index)):(t(e),s.lowlink=Math.min(s.lowlink,i[e].lowlink))}),s.lowlink===s.index){var u,c=[];do u=r.pop(),i[u].onStack=!1,c.push(u);while(a!==u);o.push(c)}}if(!e.isDirected())throw new Error("tarjan can only be applied to a directed graph. Bad input: "+e);var n=0,r=[],i={},o=[];return e.nodes().forEach(function(e){e in i||t(e)}),o}t.exports=n},{}],46:[function(e,t){function n(e){function t(a){if(a in i)throw new r;a in n||(i[a]=!0,n[a]=!0,e.predecessors(a).forEach(function(e){t(e)}),delete i[a],o.push(a))}if(!e.isDirected())throw new Error("topsort can only be applied to a directed graph. Bad input: "+e);var n={},i={},o=[],a=e.sinks();if(0!==e.order()&&0===a.length)throw new r;return e.sinks().forEach(function(e){t(e)}),o}function r(){}t.exports=n,n.CycleException=r,r.prototype.toString=function(){return"Graph has at least one cycle"}},{}],47:[function(e,t){function n(e){function t(){e.call(this),this._parents={},this._children={},this._children[null]=new r}return t.prototype=new e,t.prototype.constructor=t,t.prototype.parent=function(e,t){if(this._strictGetNode(e),arguments.length<2)return this._parents[e];if(e===t)throw new Error("Cannot make "+e+" a parent of itself");null!==t&&this._strictGetNode(t),this._children[this._parents[e]].remove(e),this._parents[e]=t,this._children[t].add(e)},t.prototype.children=function(e){return null!==e&&this._strictGetNode(e),this._children[e].keys()},t.prototype.addNode=function(t,n){return t=e.prototype.addNode.call(this,t,n),this._parents[t]=null,this._children[t]=new r,this._children[null].add(t),t},t.prototype.delNode=function(t){var n=this.parent(t);return this._children[t].keys().forEach(function(e){this.parent(e,n)},this),this._children[n].remove(t),delete this._parents[t],delete this._children[t],e.prototype.delNode.call(this,t)},t.prototype.copy=function(){var t=e.prototype.copy.call(this);return this.nodes().forEach(function(e){t.parent(e,this.parent(e))},this),t},t.prototype.filterNodes=function(t){function n(e){var t=r.parent(e);return null===t||i.hasNode(t)?(o[e]=t,t):t in o?o[t]:n(t)}var r=this,i=e.prototype.filterNodes.call(this,t),o={};return i.eachNode(function(e){i.parent(e,n(e))}),i},t}var r=e("cp-data").Set;t.exports=n},{"cp-data":25}],48:[function(e,t,n){function r(e){return Object.prototype.toString.call(e).slice(8,-1)}var i=e("../Graph"),o=e("../Digraph"),a=e("../CGraph"),s=e("../CDigraph");n.decode=function(e,t,n){if(n=n||o,"Array"!==r(e))throw new Error("nodes is not an Array");if("Array"!==r(t))throw new Error("edges is not an Array");if("string"==typeof n)switch(n){case"graph":n=i;break;case"digraph":n=o;break;case"cgraph":n=a;break;case"cdigraph":n=s;break;default:throw new Error("Unrecognized graph type: "+n)}var u=new n;return e.forEach(function(e){u.addNode(e.id,e.value)}),u.parent&&e.forEach(function(e){e.children&&e.children.forEach(function(t){u.parent(t,e.id)})}),t.forEach(function(e){u.addEdge(e.id,e.u,e.v,e.value)}),u},n.encode=function(e){var t=[],n=[];e.eachNode(function(n,r){var i={id:n,value:r};if(e.children){var o=e.children(n);o.length&&(i.children=o)}t.push(i)}),e.eachEdge(function(e,t,r,i){n.push({id:e,u:t,v:r,value:i})});var r;if(e instanceof s)r="cdigraph";else if(e instanceof a)r="cgraph";else if(e instanceof o)r="digraph";else{if(!(e instanceof i))throw new Error("Couldn't determine type of graph: "+e);r="graph"}return{nodes:t,edges:n,type:r}}},{"../CDigraph":32,"../CGraph":33,"../Digraph":34,"../Graph":35}],49:[function(e,t,n){var r=e("cp-data").Set;n.all=function(){return function(){return!0}},n.nodesFromList=function(e){var t=new r(e);return function(e){return t.has(e)}}},{"cp-data":25}],50:[function(e){var t=e("./Graph"),n=e("./Digraph");t.prototype.toDigraph=t.prototype.asDirected=function(){var e=new n;return this.eachNode(function(t,n){e.addNode(t,n)}),this.eachEdge(function(t,n,r,i){e.addEdge(null,n,r,i),e.addEdge(null,r,n,i)}),e},n.prototype.toGraph=n.prototype.asUndirected=function(){var e=new t;return this.eachNode(function(t,n){e.addNode(t,n)}),this.eachEdge(function(t,n,r,i){e.addEdge(t,n,r,i)}),e}},{"./Digraph":34,"./Graph":35}],51:[function(e,t,n){n.values=function(e){var t,n=Object.keys(e),r=n.length,i=new Array(r);for(t=0;r>t;++t)i[t]=e[n[t]];return i}},{}],52:[function(e,t){t.exports="0.7.4"},{}],53:[function(e,t){void function(){"use strict";t.exports=function(e){return function(){return e.bind(null,this).apply(null,arguments)}}}()},{}],54:[function(e,t){function n(e,t){t||(t={});var n="object"==typeof e?[e]:s(e);return i(u(t),function(e){var o=t[e];i(n,function(t){if(":first"===e)r(t,o);else if(/:first$/.test(e)){var n=e.replace(/:first$/,""),i=t.querySelector(n);i&&r(i,o)}else{var a=t.querySelectorAll(e);if(0===a.length)return;for(var s=0;s<a.length;s++)r(a[s],o)}})}),1===n.length?n[0]:n}function r(e,t){if(o(t))e.innerHTML="",e.appendChild(t);else if(c(t)){for(var r=0;r<t.length;r++){var s=n(e.cloneNode(!0),t[r]);e.parentNode.insertBefore(s,e)}e.parentNode.removeChild(e)}else t&&"object"==typeof t?i(u(t),function(n){"_text"===n?a(e,t[n]):"_html"===n&&o(t[n])?(e.innerHTML="",e.appendChild(t[n])):"_html"===n?e.innerHTML=t[n]:e.setAttribute(n,t[n])}):a(e,t)}function i(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)}function o(e){return e&&"object"==typeof e&&e.childNodes&&("function"==typeof e.appendChild||"object"==typeof e.appendChild)}function a(e,t){e.innerHTML="";var n=document.createTextNode(String(t));e.appendChild(n)}var s=e("domify");t.exports=n;var u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{domify:55}],55:[function(e,t){function n(e){if("string"!=typeof e)throw new TypeError("String expected");var t=/<([\w:]+)/.exec(e);if(!t)throw new Error("No elements were generated.");var n=t[1];if("body"==n){var o=document.createElement("html");return o.innerHTML=e,[o.removeChild(o.lastChild)]}var a=i[n]||i._default,s=a[0],u=a[1],c=a[2],o=document.createElement("div");for(o.innerHTML=u+e+c;s--;)o=o.lastChild;return r(o.children)}function r(e){for(var t=[];e.length;)t.push(e[0].parentNode.removeChild(e[0]));return t}t.exports=n;var i={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],colgroup:[1,"<table>","</table>"],caption:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]}},{}],56:[function(e,t){void function(){function e(e){return Math.floor(Math.random()*e)}function n(t,n){for(var r="",i=t.length;n--;){var o=e(i);r+=t[o]}return r}function r(e){e="string"==typeof e&&e.length>0?e:"abcdefghijklmnopqrstuvwxzy0123456789";var t=i.bind(i,e);return t.salt=function(){return e},t.create=r,t.gen=r,t}var i=function(e,t){return isNaN(t)?void 0:1>t?void 0:n(e,t)};i.gen=r,t.exports=r()}(this)},{}],57:[function(t,n){void function(t){"use strict";var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=function(e,t){for(var n in t)e[n]=t[n];return e},o={extend:function(e){return i(r(this),e)},make:function(){var e=r(this);return"function"==typeof e.init&&e.init.apply(e,arguments),e}};"undefined"!=typeof n&&n.exports?n.exports=o:"function"==typeof e&&e.amd?e(o):t.Viral=o}(this)},{}],58:[function(e,t,n){n.zipWith=function(){var e,t=Array.prototype.slice.call(arguments),n=t.splice(1),r=[],i=Math.max.apply(null,Array.prototype.map.call(n,function(e){return e.length}));for(t=t[0],e=0;i>e;e++)r.push(t.apply(null,[].map.call(n,function(t){return t[e]})));return r},n.zip=n.zipWith.bind(null,function(){return[].slice.call(arguments)})},{}],59:[function(e,t){void function(){"use strict";t.exports=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}}()},{}],60:[function(e,t){void function(){function e(e,t){return t=t||document,t.querySelector(e)}function n(e,t){var n=document.createElement(e);return t&&i(n,t),n}function r(e){e.setAttribute(name,value)}function i(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function o(e){return e.textContent||e.innerText}function a(e,t){e.textContent=e.innerText=t}function s(e,t,n){e.insertBefore(t,n.nextSibling)}function u(e){e.parentNode.removeChild(e)}t.exports={$:e,$id:function(e){return document.getElementById(e)},create:n,attr:r,attrs:i,get_text:o,set_text:a,remove:u,insertAfter:s}}()},{}],61:[function(e,t){void function(){var n=e("viral"),r=e("events");t.exports=n.extend(r.EventEmitter.prototype).extend({init:function(){r.EventEmitter.call(this)}})}()},{events:66,viral:57}],62:[function(e,t){void function(){t.exports=function(e){return function(t){return t[e]}}}()},{}],63:[function(e,t){void function(){t.exports=function(e,t){return{x:t.x+e[0],y:t.y+e[1]}}}()},{}],64:[function(e,t){void function(){function n(){return o(1)+i(16)}var r=[],i=e("random-token"),o=i.gen("abcdefghijklmnopqrstuvwxyt");t.exports=function(){for(var e=n();-1!=r.indexOf(e);)e=n();return e}}()},{"random-token":56}],65:[function(e,t){void function(){function e(e,t){return Math.sqrt(Math.pow(e,2),Math.pow(t,2))}t.exports={cross:function(e,t){return e[0]*t[1]-e[1]*t[0]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},add:function(e,t){return[e[0]+t[0],e[1]+t[1]]},subtract:function(e,t){return[e[0]-t[0],e[1]-t[1]]},scale:function(e,t){return[e[0]*t,e[1]*t]},eq:function(e,t){return e[0]==t[0]&&e[1]==t[1]},magnitude:function(t){return e(t[0],t[1])}}}()},{}],66:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}]},{},[7])(7)});